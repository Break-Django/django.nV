#Vulnerability Report
#### Mike Harrison
#### with additonal help from Rick Tesmond

### Oct 2016

## Vulnerability - A1 Injection
In views.py upload function there a form upload. However it directly executes SQL commands.
```
            curs = connection.cursor()
            curs.execute(
                "insert into taskManager_file ('name','path','project_id') values ('%s','%s',%s)" %
                (name, upload_path, project_id))
```

## Repair
Since the above code excutes directly, to fix the vulnerability we can use the orm to make sure the data passed it cleaned.
We replace the above code with
```
            file = File(
            name = name,
            path = upload_path,
            project = proj
            )
            file.save()
```

This uses django's SQL ORM.

## Vulnerability - A2 Broken Auth
I was able to login by setting the html as is_superuser using some input tags.
```
<input type="checkbox" name="is_superuser"> and <input type="checkbox" name="is_staff">
```
This is because this uses an excludes
```
class UserForm(forms.ModelForm):
    """ User registration form """
    class Meta:
        model = User
        exclude = ['groups', 'user_permissions', 'last_login', 'date_joined', 'is_active']
```

## Repair
Instead of using a excludes blacklist we can switch to a whitelist that allows only certain fields.
```
class UserForm(forms.ModelForm):
    """ User registration form """
    class Meta:
        model = User
        fields = ('username', 'first_name', 'last_name', 'email', 'password')
```

